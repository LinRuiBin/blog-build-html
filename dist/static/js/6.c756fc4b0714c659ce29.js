webpackJsonp([6],{"8MYu":function(e,r,s){"use strict";s.d(r,"b",function(){return o}),s.d(r,"c",function(){return a}),s.d(r,"a",function(){return n});var t=s("0w2Z"),o=function(e){return t.a.fetchPost("/login/",e)},a=function(e){return t.a.fetchPost("/users/",e)},n=function(e){return t.a.fetchPost("/code/",e)}},PWvr:function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=s("4YfN"),o=s.n(t),a=s("8MYu"),n=s("VKKs"),l=s("9rMa"),i={data:function(){var e=this;return{backtitle:"<< 回去登录",show:!0,loading:!1,count:"",timer:null,ruleForm:{username:"",password:"",checkPass:"",code:""},rules:{username:[{required:!0,message:"请输入手机号",trigger:"blur"},{min:11,max:11,message:"长度为11个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"},{validator:function(r,s,t){""===s?t(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),t())},trigger:"blur"}],checkPass:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"},{validator:function(r,s,t){""===s?t(new Error("请再次输入密码")):s!==e.ruleForm.password?t(new Error("两次输入密码不一致!")):t()},trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:4,max:6,message:"请输入认证码",trigger:"blur"}]}}},methods:o()({},Object(l.b)(["setInfo"]),{submitForm:function(e){var r=this;this.$refs[e].validate(function(e){e&&r.register()})},register:function(){var e=this,r={username:this.ruleForm.username,password:this.ruleForm.password,code:this.ruleForm.code},s=this;this.loading=!0,Object(a.c)(r).then(function(r){s.loading=!1,200===r.status&&e.$message({message:"注册成功",type:"success"}),Object(n.c)("name",r.data.username),Object(n.c)("token",r.data.token),e.$store.dispatch("setInfo"),e.$router.push({path:"/home"}),console.log("注册结果: "+r)}).catch(function(e){s.loading=!1,"code"in e&&alert(e.code[0]),"username"in e&&alert(e.username[0]),"password"in e&&alert(e.password[0]),console.log("注册失败"+e)})},backtohome:function(){this.$router.push({path:"/login/"})},_getCode:function(){var e=this;this.getCode();this.timer||(this.count=60,this.show=!1,this.timer=setInterval(function(){e.count>0&&e.count<=60?e.count--:(e.show=!0,clearInterval(e.timer),e.timer=null)},1e3))},getCode:function(){var e={mobile:this.ruleForm.username};Object(a.a)(e).then(function(e){console.log("获取验证码")}).catch(function(e){console.log("获取验证码失败"+e)})}}),computed:{},components:{}},c={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("el-row",[s("span",{staticClass:"back",staticStyle:{cursor:"pointer"},on:{click:e.backtohome}},[e._v(e._s(e.backtitle))]),e._v(" "),s("el-col",{attrs:{xs:"{span:20,offset:2}",sm:{span:12,offset:6},md:{span:10,offset:7},lg:{span:10,offset:7},xl:{span:10,offset:7}}},[s("div",{staticClass:"login"},[s("h1",[e._v("注册")]),e._v(" "),s("div",{staticClass:"form"},[s("el-form",{ref:"ruleForm",staticClass:"login-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"手机号",prop:"username"}},[s("el-input",{model:{value:e.ruleForm.username,callback:function(r){e.$set(e.ruleForm,"username",r)},expression:"ruleForm.username"}})],1),e._v(" "),s("el-form-item",{staticClass:"codeform",attrs:{label:"验证码",prop:"code"}},[s("el-input",{staticClass:"codeinput",model:{value:e.ruleForm.code,callback:function(r){e.$set(e.ruleForm,"code",r)},expression:"ruleForm.code"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],on:{click:e._getCode}},[e._v("获取验证码")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count"},[e._v(e._s(e.count)+" s")])],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[s("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm.checkPass,callback:function(r){e.$set(e.ruleForm,"checkPass",r)},expression:"ruleForm.checkPass"}})],1),e._v(" "),s("el-form-item",[s("el-button",{staticClass:"loginBtn",attrs:{type:"primary",loading:e.loading},on:{click:function(r){e.submitForm("ruleForm")}}},[e._v("注册")])],1)],1)],1)])])],1)},staticRenderFns:[]};var u=s("vSla")(i,c,!1,function(e){s("RWJC")},"data-v-44ae005a",null);r.default=u.exports},RWJC:function(e,r){}});
//# sourceMappingURL=6.c756fc4b0714c659ce29.js.map